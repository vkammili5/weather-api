@startuml "WeatherAPI"
skinparam ClassAttributeIconSize 0

class CityController {
    - cityService : ICityService

    + CityController(cityService : ICityService)

    + GetCityByCityName(cityName : string) : ActionResult<City>

    + AddCity(city : City) : ActionResult<City>

    + UpdateCity(cityName : string, city : City) : ActionResult<City>

    + DeleteCity(cityName : string) : IActionResult
}

interface ICityService <<interface>> {
    + GetCityByCityName(cityName : string) : City

    + AddCity(city: City) : City

    + UpdateCity(cityName : string, city : city) : City

    + DeleteCity(cityName : string) : void

    + CityExists(cityName : string) : bool
}

class CityService {
    - httpClient : HttpClient
    - cityContext : CityContext

    + CityService(cityContext : CityContext)
}

class City {
    + CityName : string
    + latitude : double
    + longitude : double
}

class WeatherController {
    - weatherService : IWeatherService
    - cityService : ICityService

    + WeatherController(\n\
        weatherService : IWeatherService,\n\
        cityService : ICityService\n\
    )

    + GetWeatherByLatLon(\n\
        latitude : double, \n\
        longitude : double\n\
    ) : ActionResult<Weather>

    + GetWeatherByCityName(\n\
        cityName : string\n\
    ) : ActionResult<Weather>
}

interface IWeatherService <<interface>> {
    + GetWeatherByLatLon(\n\
        latitude : double, \n\
        longitude : double\n\
    ) : Weather
}

class WeatherService {
    - httpClient : HttpClient
}

class Weather {
    + Latitude : double
    + Longitude : double
    + StartDate : DateTime
    + EndDate : DateTime
    + WeatherCodes : List<WeatherCode>
}

Enum WeatherCode {
    ClearSky
    Cloudy
    Fog
    RainOrWorse
}

CityController o-- ICityService

ICityService <|.. CityService
ICityService ---> City
WeatherController ----> City

WeatherController o-- IWeatherService
WeatherController o-- ICityService

IWeatherService <|.. WeatherService

WeatherController ----> Weather
IWeatherService ---> Weather

Weather o-- WeatherCode

@enduml